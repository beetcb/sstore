const CloudBase=require("@cloudbase/manager-node");let tcb,timeout,conf;module.exports=class{constructor(t){const data=process.env.conf;conf=data?JSON.parse(data):{},tcb=new CloudBase({}),timeout=t||2e4}get(key){return conf[key]}set(key,value){let timeUpdater;conf[key]=value,timeUpdater&&clearTimeout(timeUpdater),timeUpdater=setTimeout((()=>tcb.functions.updateFunctionConfig({name:process.env.SCF_FUNCTIONNAME,envVariables:{conf:JSON.stringify(conf)}})),timeout-1e3)}};